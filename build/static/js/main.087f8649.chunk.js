(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var r=t(2),o=t(16),a=t.n(o),c=t(3),u=t(4),i=t.n(u),s="/api/persons",d=function(){return i.a.get(s).then((function(e){return e.data}))},l=function(e){return i.a.post(s,e).then((function(e){return e.data}))},m=function(e){return i.a.delete("".concat(s,"/").concat(e))},f=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},b=t(0),j=function(e){var n=e.message,t=e.error?{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return null===n?null:Object(b.jsx)("div",{style:t,className:"error",children:n})},h=function(e){var n=e.person,t=e.deleteFunc;return Object(b.jsxs)("div",{children:[n.name," ",n.number," ",Object(b.jsx)("button",{onClick:t,children:"delete"})]})},O=function(e){var n=e.persons,t=e.search,r=e.deleteNum;return n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(b.jsx)(h,{person:e,deleteFunc:function(){return r(e.id)}},e.name)}))},g=function(e){var n=e.value,t=e.onChange;return Object(b.jsx)("input",{value:n,onChange:t})},p=function(e){var n=e.submitHandle,t=e.numValue,r=e.nameValue,o=e.onNameChange,a=e.onNumChange;return Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{children:["name:",Object(b.jsx)("input",{onChange:o,value:r})]}),Object(b.jsxs)("div",{children:["number:",Object(b.jsx)("input",{onChange:a,value:t})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},v=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],a=Object(r.useState)(""),u=Object(c.a)(a,2),i=u[0],s=u[1],h=Object(r.useState)(""),v=Object(c.a)(h,2),x=v[0],C=v[1],w=Object(r.useState)(""),S=Object(c.a)(w,2),k=S[0],y=S[1],N=Object(r.useState)(null),V=Object(c.a)(N,2),E=V[0],T=V[1],B=Object(r.useState)(!1),z=Object(c.a)(B,2),A=z[0],D=z[1];Object(r.useEffect)((function(){d().then((function(e){return o(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(j,{message:E,error:A}),Object(b.jsx)(g,{value:k,onChange:function(e){y(e.target.value)}}),Object(b.jsx)("h3",{children:"Add a new"}),Object(b.jsx)(p,{submitHandle:function(e){e.preventDefault();var n={name:i,number:x},r=function(){s(""),C("")};if(t.map((function(e){return e.name})).includes(i)){if(window.confirm("".concat(i," is already added to phonebook, repalce the old number with the new one?"))){var a=t.find((function(e){return e.name===n.name}));f(a.id,n).then((function(e){return o(t.map((function(t){return t.name===n.name?e:t})))})).then((function(e){T("Changed ".concat(a.name)),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){console.log(e.name),"ValidationError"===e.name?(D(!0),T(e.message)):(D(!0),T("Information of ".concat(a.name," has already been removed from the server"))),setTimeout((function(){T(null),D(!1)}),5e3),o(t.filter((function(e){return e.id!==a.id})))}))}r()}else l(n).then((function(e){o(t.concat(e)),T("Added ".concat(n.name)),setTimeout((function(){return T(null)}),5e3)})).catch((function(e){console.log(e.name),"ValidationError"===e.name&&(D(!0),T(e.message),setTimeout((function(){D(!1),T(null)}),5e3))})),r()},numValue:x,nameValue:i,onNameChange:function(e){return s(e.target.value)},onNumChange:function(e){return C(e.target.value)}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(O,{persons:t,search:k,deleteNum:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&m(e).then((function(n){return o(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(b.jsx)(v,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.087f8649.chunk.js.map