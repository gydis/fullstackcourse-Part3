{"version":3,"sources":["services/numbers.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","num","post","id","delete","newObject","put","Notification","message","style","error","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","className","Person","person","deleteFunc","name","number","onClick","Persons","persons","search","deleteNum","filter","toLowerCase","includes","map","Filter","value","onChange","PersonForm","submitHandle","numValue","nameValue","onNameChange","onNumChange","onSubmit","type","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newSearch","setNewSearch","errorMessage","setErrorMessage","setError","useEffect","numberService","event","target","preventDefault","newObj","clean","window","confirm","find","x","setTimeout","catch","console","log","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.560bc221.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  return axios.get(baseUrl).then((response) => response.data);\n};\n\nconst createNum = (num) => {\n  return axios.post(baseUrl, num).then((response) => response.data);\n};\n\nconst deleteNum = (id) => {\n  return axios.delete(`${baseUrl}/${id}`);\n};\n\nconst update = (id, newObject) => {\n  return axios\n    .put(`${baseUrl}/${id}`, newObject)\n    .then((response) => response.data);\n};\n\nexport default { getAll, createNum, deleteNum, update };\n","import React, { useState, useEffect } from \"react\";\nimport numberService from \"./services/numbers\";\n\nconst Notification = ({ message, error }) => {\n  const style = error\n    ? {\n        color: \"red\",\n        background: \"lightgrey\",\n        fontSize: 20,\n        borderStyle: \"solid\",\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n      }\n    : {\n        color: \"green\",\n        background: \"lightgrey\",\n        fontSize: 20,\n        borderStyle: \"solid\",\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n      };\n  if (message === null) return null;\n  else\n    return (\n      <div style={style} className=\"error\">\n        {message}\n      </div>\n    );\n};\n\nconst Person = ({ person, deleteFunc }) => {\n  return (\n    <div>\n      {person.name} {person.number} <button onClick={deleteFunc}>delete</button>\n    </div>\n  );\n};\n\nconst Persons = ({ persons, search, deleteNum }) => {\n  return persons\n    .filter((person) =>\n      person.name.toLowerCase().includes(search.toLowerCase())\n    )\n    .map((person) => (\n      <Person\n        key={person.name}\n        person={person}\n        deleteFunc={() => deleteNum(person.id)}\n      />\n    ));\n};\n\nconst Filter = ({ value, onChange }) => {\n  return <input value={value} onChange={onChange} />;\n};\n\nconst PersonForm = ({\n  submitHandle,\n  numValue,\n  nameValue,\n  onNameChange,\n  onNumChange,\n}) => {\n  return (\n    <form onSubmit={submitHandle}>\n      <div>\n        name:\n        <input onChange={onNameChange} value={nameValue} />\n      </div>\n      <div>\n        number:\n        <input onChange={onNumChange} value={numValue} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newSearch, setNewSearch] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    numberService.getAll().then((data) => setPersons(data));\n  }, []);\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const newObj = {\n      name: newName,\n      number: newNumber,\n    };\n\n    const clean = () => {\n      setNewName(\"\");\n      setNewNumber(\"\");\n    };\n\n    if (persons.map((person) => person.name).includes(newName)) {\n      const answer = window.confirm(\n        `${newName} is already added to phonebook, repalce the old number with the new one?`\n      );\n      if (answer) {\n        const person = persons.find((x) => x.name === newObj.name);\n        numberService\n          .update(person.id, newObj)\n          .then((data) =>\n            setPersons(persons.map((x) => (x.name === newObj.name ? data : x)))\n          )\n          .then((data) => {\n            setErrorMessage(`Changed ${person.name}`);\n            setTimeout(() => setErrorMessage(null), 5000);\n          })\n          .catch((error) => {\n            console.log(error);\n            if (error.name === \"ValidationError\") {\n              setError(true);\n              setErrorMessage(error.message);\n            } else {\n              setError(true);\n              setErrorMessage(\n                `Information of ${person.name} has already been removed from the server`\n              );\n            }\n            setTimeout(() => {\n              setErrorMessage(null);\n              setError(false);\n            }, 5000);\n            setPersons(persons.filter((x) => x.id !== person.id));\n          });\n      }\n      clean();\n      return;\n    }\n\n    numberService\n      .createNum(newObj)\n      .then((data) => {\n        setPersons(persons.concat(data));\n        setErrorMessage(`Added ${newObj.name}`);\n        setTimeout(() => setErrorMessage(null), 5000);\n      })\n      .catch((error) => {\n        console.log(error.response.data);\n        if (error.name === \"ValidationError\") {\n          setError(true);\n          setErrorMessage(error.message);\n          setTimeout(() => {\n            setError(false);\n            setErrorMessage(null);\n          }, 5000);\n        }\n      });\n    clean();\n  };\n\n  const deleteNum = (id) => {\n    const person = persons.find((x) => x.id === id);\n    if (window.confirm(`Delete ${person.name}?`))\n      numberService\n        .deleteNum(id)\n        .then((response) => setPersons(persons.filter((x) => x.id !== id)));\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} error={error} />\n      <Filter\n        value={newSearch}\n        onChange={(event) => {\n          setNewSearch(event.target.value);\n        }}\n      />\n      <h3>Add a new</h3>\n      <PersonForm\n        submitHandle={handleSubmit}\n        numValue={newNumber}\n        nameValue={newName}\n        onNameChange={(event) => setNewName(event.target.value)}\n        onNumChange={(event) => setNewNumber(event.target.value)}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={persons} search={newSearch} deleteNum={deleteNum} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}